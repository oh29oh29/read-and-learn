# 15. 클래스와 멤버의 접근 권한을 최소화하라

잘 설계된 컴포넌트는 모든 내부 구현을 완벽히 숨겨 구현과 API 를 깔끔히 분리한다.  
정보 은닉, 혹은 캡슐화라고 하는 이 개념은 소프트웨어 설계의 근간이 되는 원리다.

### 정보 은닉의 장점
- 시스템 개발 속도를 높인다.
- 시스템 관리 비용을 낮춘다.
- 정보 은닉 자체가 성능을 높여주지는 않지만, 성능 최적화에 도움을 준다.
- 소프트웨어 재사용성을 높인다.
- 큰 시스템을 제작하는 난이도를 낮춰준다.

자바는 정보 은닉을 위한 다양한 장치를 제공하는데, 그 중 하나가 접근 제한자이다.  
접근 제한자를 제대로 활용하는 것이 정보 은닉의 핵심이다.

**모든 클래스와 멤버의 접근성을 가능한 한 좁혀야 한다.**

한 클래스에서만 사용하는 package-private 톱레벨 클래스나 인터페이스는 이를 사용하는 클래스 안에 private static 으로 중첩시켜보자([24. 멤버 클래스는 되도록 static 으로 만들라](https://github.com/oh29oh29/read-and-learn/tree/master/books/effective-java-3rd/Chapter24.md)).
톱레벨로 두면 같은 패키지의 모든 클래스가 접근할 수 있지만, private static 으로 중첩시키면 바깥 클래스 하나에서만 접근할 수 있다.

더 중요한건, public 일 필요가 없는 클래스의 접근 수준을 package-private 톱레벨 클래스로 좁히는 일이다.
public 클래스는 그 패키지의 API 인 반면, package-private 톱레벨 클래스는 내부 구현에 속하기 때문이다.

### 접근 제한자
- private: 멤버를 선언한 톱레벨 클래스에서만 접근할 수 있다.
- package-private: 멤버가 소속된 패키지 안의 모든 클래스에서 접근할 수 있다. 접근 제한자를 명시하지 않았을 때 적용되는 패키지 접근 수준이다(단, 인터페이스의 멤버는 기본적으로 public 이 적용된다).
- protected: package-private 의 접근 범위를 포함하며, 이 멤버를 선언한 클래스의 하위 클래스에서도 접근할 수 있다.
- public: 모든 곳에서 접근할 수 있다.

public 클래스의 protected 멤버는 공개 API 이므로 영원히 지원돼야 한다. 또한 내부 동작 방식을 API 문서에 적어 사용자에게 공개해야 할 수도 있다.

단지 코드를 테스트하려는 목적으로 클래스, 인터페이스, 멤버의 접근 범위를 넓히려 할 때가 있다.
적당한 수준까지는 넓혀도 괜찮다. 다만, 공개 API 로 만들어서는 안된다. 테스트 코드를 테스트 대상과 같은 패키지에 두면 package-private 요소에 접근할 수 있다.