# 17. 변경 가능성을 최소화하라

불변 클래스란 그 인스턴스의 내부 값을 수정할 수 없는 클래스다.  
불변 클래스는 가변 클래스보다 오류가 생길 여지가 적고 훨씬 안전하다.

### 불변 클래스 규칙

- 객체의 상태를 변경하는 메서드(변경자)를 제공하지 않는다.
- 클래스를 확장할 수 없도록 한다.
- 모든 필드를 final 로 선언한다.
- 모든 필드를 private 으로 선언한다.
- 자신 외에는 내부의 가변 컴포넌트에 접근할 수 없도록 한다.

**불변 객체는 근본적으로 thread safe 하여 따로 동기화할 필요가 없다.**  
여러 쓰레드가 동시에 사용해도 절대 훼손되지 않는다.

불변 클래스에도 단점은 있다.  
값이 다르면 반드시 독립된 객체로 만들어야 한다는 것이다.

### 불변 클래스를 만드는 방법

1. final 클래스로 선언
2. 모든 생성자를 private 혹은 package-private 으로 만들고 public 정적 팩터리를 제공

불변으로 만들 수 없는 클래스라도 변경할 수 있는 부분을 최소한으로 줄이자.  
생성자는 불변식 설정이 모두 완료된, 초기화가 완벽히 끝난 상태의 객체를 생성해야 한다.