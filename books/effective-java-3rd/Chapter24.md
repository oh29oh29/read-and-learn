# 24. 멤버 클래스는 되도록 static 으로 만들라

중첩 클래스(nested class)란 다른 클래스 안에 정의된 클래스를 의미한다.

중첩 클래스는 자신을 감싼 바깥 클래스에서만 쓰여야 하며, 그 외의 쓰임새가 있다면 톱레벨 클래스로 만들어야 한다.

### 중첩 클래스 종류
- 정적 멤버 클래스
- (비정적) 멤버 클래스
- 익명 클래스
- 지역 클래스

정적 멤버 클래스를 제외한 나머지 클래스는 내부 클래스(inner class)에 해당한다.

### 정적 멤버 클래스
일반 클래스와의 차이점
- 다른 클래스 안에 선언되고, 바깥 클래스의 private 멤버에도 접근할 수 있다

흔히 바깥 클래스와 함께 쓰일 때만 유용한 public 도우미 클래스로 쓰인다.

비정적 멤버 클래스의 인스턴스는 바깥 클래스의 인스턴스와 암묵적으로 연결된다.  
따라서 개념상 중첩 클래스의 인스턴스가 바깥 인스턴스와 독립적으로 존재할 수 있다면 정적 멤버 클래스로 만들어야 한다.  

**멤버 클래스에서 바깥 인스턴스에 접근할 일이 없다면 무조건 static 을 붙여서 정적 멤버 클래스로 만들자.**

private 정적 멤버 클래스는 흔히 바깥 클래스가 표현하는 객체의 한 부분을 나타낼 때 쓴다.

### 비정적 멤버 클래스
어댑터를 정의할 때 자주 쓰인다.  
즉, 어떤 클래스의 인스턴스를 감싸 마치 다른 클래스의 인스턴스처럼 보이게 하는 뷰로 사용한다.

#### 비정적 멤버 클래스의 단점
- 바깥 인스턴스로의 숨은 외부 참조를 갖게 되기 때문에 참조를 저장하기 위한 시간과 공간이 소비된다.
- GC 가 바깥 클래스의 인스턴스를 수거하지 못하는 메모리 누수가 생길 수 있다.

### 익명 클래스
바깥 클래스의 멤버가 아니다.  
쓰이는 시점에 선언과 동시에 인스턴스가 만들어진다.

오직 비정적인 문맥에서 사용될 때만 바깥 클래스의 인스턴스를 참조할 수 있다.  
정적 문맥에서라도 상수 변수 이외의 정적 멤버는 가질 수 없다. 즉, 상수 표현을 위해 초기화된 final 기본 타입과 문자열 필드만 가질 수 있다.

익명 클래스의 또 다른 주 쓰임은 정적 팩토리 메서드를 구현할 때다.

### 지역 클래스
지역변수를 선언할 수 있는 곳이면 실질적으로 어디서든 선언할 수 있고, 유효 범위도 지역변수와 같다.  

멤버 클래스처럼 이름이 있고 반복해서 사용할 수 있다.  
익명 클래스처럼 비정적 문맥에서 사용될 때만 바깥 인스턴스를 참조할 수 있으며, 정적 멤버는 가질 수 없고 가독성을 위해 짧게 작성해야 한다.