# 07. 함께 모으기

마틴 파울러가 말하는 객체지향 설계 안에 존재하는 세 가지 상호 연관된 관점

#### 개념 관점 (Conceptual Perspective)

설계는 도메인 안에 존재하는 개념과 개념들 사이의 관계를 표현한다.  
이 관점은 사용자가 도메인을 바라보는 관점을 반영한다.  
따라서 실제 도메인의 규칙과 제약을 최대한 유사하게 반영하는 것이 핵심이다.

#### 명세 관점 (Specification Perspective)

도메인의 개념이 아니라 실제로 소프트웨어 안에서 살아 숨쉬는 객체들의 책임에 초점을 맞추게 된다.  
즉, 객체의 인터페이스를 바라보게 된다.  
명세 관점에서 프로그래머는 객체가 협력을 위해 '무엇'을 할 수 있는가에 초점을 맞춘다.

#### 구현 관점 (Implementation Perspective)

객체들이 책임을 수행하는 데 필요한 동작하는 코드를 작성하는 것이다.  
따라서 프로그래머는 객체의 책임을 '어떻게' 수행할 것인가에 초점을 맞추며 인터페이스를 구현하는 데 필요한 속성과 메서드를 클래스에 추가한다.

개념 관점, 명세 관점, 구현 관점은 동일한 클래스를 세 가지 다른 방향에서 바라보는 것을 의미한다.  
클래스는 세 가지 관점을 모두 수용할 수 있도록 개념, 인터페이스, 구현을 함께 드러내야 한다.

### 설계하고 구현하기

#### 커피를 주문하기 위한 협력 찾기

객체지향 설계의 첫 번째 목표는 훌륭한 객체를 설계하는 것이 아니라 훌륭한 협력을 설계하는 것이다.  
협력을 설계할 때는 객체가 메시지를 선택하는 것이 아니라 메시지가 객체를 선택하게 해야 한다.  
메시지를 먼저 선택하고 그 후에 메시지를 수신하기에 적절한 객체를 선택해야 한다는 것을 의미한다.

#### 인터페이스 정리하기

객체가 수신한 메시지가 객체의 인터페이스를 결정한다.  
메시지가 객체를 선택했고, 선택된 객체는 메시지를 자신의 인터페이스로 받아들인다.

각 객체를 협력이라는 문맥에서 떼어내어 수신 가능한 메시지만 추려내면 객체의 인터페이스가 된다.  
객체가 어떤 메시지를 수신할 수 있다는 것은 그 객체의 인터페이스 안에 메시지에 해당하는 오퍼레이션이 존재한다는 것을 의미한다.

#### 구현하기

클래스의 인터페이스를 식별했으므로 오퍼레이션을 수행하는 방법을 메서드로 구현한다.

### 코드와 세 가지 관점

#### 코드는 세 가지 관점을 모두 제공해야 한다

개념 관점, 명세 관점, 구현 관점은 동일한 코드를 바라보는 서로 다른 관점이다.  
하나의 클래스 안에 세 가지 관점을 모두 포함하면서도 각 관점에 대응되는 요소를 명확하고 깔끔하게 드러낼 수 있다.  

세 가지 관점이 명확하게 드러날 수 있게 코드를 개선하라.  
그것이 변경에 유연하게 대응할 수 있는 객체지향 코드를 작성하는 가장 빠른 길이다.

#### 도메인 개념을 참조하는 이유

도메인 개념 안에서 적절한 객체를 선택하는 것은 도메인에 대한 지식을 기반으로 코드의 구조와 의미를 쉽게 유추할 수 있게 한다.  
이것은 시스템의 유지보수성에 커다란 영향을 미친다.

#### 인터페이스와 구현을 분리하라

명세 관점은 클래스의 안정적인 측면을 드러내야 한다.  
구현 관점은 클래스의 불안정한 측면을 드러내야 한다.  
인터페이스가 구현 세부 사항을 노출하기 시작하면 아주 작은 변동에도 전체 협력이 요동치는 취약한 설계를 얻을 수 밖에 없다.


