# 07. 객체 간의 기능 이동

### 메소드 이동 (Move Method)

* 메소드가 자신이 속한 클래스보다 다른 클래스의 기능을 더 많이 이용할 땐 제일 많이 이용하는 클래스 안에서 비슷한 내용의 새 메소드를 작성한다.
* 기존 메소드는 간단한 대리 메소드로 전환하든지 삭제한다.

##### 동기

* 클래스에 기능이 너무 많거나 클래스가 다른 클래스와 과하게 연동되어 의존성이 지나칠 때는 메소드를 옮기는 것이 좋다.
* 옮길 만한 메소드가 빌갼되면 그 메소드를 호출하는 메소드, 그 메소드가 호출하는 메소드, 상속 계층에서 그 메소드를 재정의하는 메소드를 살펴본다. 옮기려는 메소드가 더 많이 참조한다고 생각되는 메소드가 들어 있는 객체를 기준으로 해서 계속 진행할지를 판단한다.
* 메소드를 옮길지 확신이 서지 않을 때는 다른 메소드를 살펴본다.
* 판단하기 쉽지 않다는 것은 문제가 있다는 의미이기도 하다.

##### 방법

1. 원본 클래스에 정의되어 있는 원본 메소드에 사용된 모든 기능을 확인한다. 그 기능들도 전부 옮겨야 할지 판단한다. 옮길 메소드에만 사용되는 기능도 함께 옮겨야 한다.
2. 원본 클래스의 하위클래스와 상위클래스에서 그 메소드에 대한 다른 선언이 있는지 확인한다. 다른 선언이 있다면 대상 클래스에도 재정의를 넣을 수 있을 때만 옮길 수 있을지도 모른다.
3. 그 메소드를 대상 클래스 안에 선언한다.
4. 원본 메소드의 코드를 대상 메소드에 복사한 후, 대상 클래스 안에서 잘 돌아가게끔 대상 메소드를 약간 수정한다. 대상 메소드가 원본 메소드를 사용한다면 대상 메소드 안에서 원본 객체를 참조할 방법을 정해야 한다. 대상 클래스에 원본 객체를 참조하는 기능이 없다면 원본 객체 참조를 대상 메소드에 매개변수로 전달한다.
5. 대상 클래스를 컴파일한다.
6. 원본 객체에서 대상 객체를 잠조할 방법을 정한다. 대상 클래스를 참조하는 속성이나 메소드가 이미 존재할 수도 있지만, 혹시 없다면 대상 클래스를 참조하는 메소드를 쉽게 작성할 수 있는지 살펴봐서, 쉽지 않다면 원본 클래스 안에 대상 클래스를 저장할 수 있는 새 속성을 선언해야 한다.
7. 원본 메소드를 위임 메소드로 전환한다.
8. 컴파일과 테스트를 실시한다.
9. 원본 메소드를 삭제하든지, 위임 메소드로 사용하게 내버려둔다.
10. 원본 메소드를 삭제할 때는 기존의 참조를 전부 대상 메소드 참조로 수정한다.
11. 컴파일과 테스트를 실시한다.
