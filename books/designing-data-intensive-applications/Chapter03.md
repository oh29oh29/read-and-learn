# 저장소와 검색

해당 장에서는 **데이터베이스가 데이터를 저장하는 방법과 데이터를 요청했을 때 다시 찾을 수 있는 방법**을 설명한다.

- RDB와 NoSQL라 불리는 데이터베이스에 사용되는 저장소 엔진에 대해 설명한다.
- 로그 구조(log-structured) 계열 저장소 엔진과 B-tree 같은 페이지 지향(page-oriented) 계열 저장소 엔진을 검토한다.

### 데이터베이스를 강력하게 만드는 데이터 구조

많은 데이터베이스는 내부적으로 추가 전용(append-only) 데이터 파일인 로그(log)를 사용한다.  

로그만으로는 부족하다.  
로그는 많은 레코드가 있으면 성능이 매우 좋지 않다.  
⇒ 매번 키를 찾을 때마다 존재하는지 찾기 위해 전체 데이터베이스 파일을 처음부터 끝까지 스캔해야 한다.  
⇒ 검색 비용 O(n)

#### 색인

데이터베이스에서 특정 키의 값을 효율적으로 찾기 위한 데이터 구조.  
다양한 색인 구조가 존재한다.

색인의 일반적인 개념은 **어떤 부가적인 메타데이터를 유지**하는 것이다.  
메타데이터는 이정표 역할을 해서 원하는 데이터의 위치를 찾는데 도움을 준다.

다만, 색인은 쓰기 과정에서 오버헤드가 발생한다.  
데이터를 쓸 때마다 매번 색인도 갱신해야 하기 때문에 대개 쓰기 속도를 느리게 만든다.

#### 해시 색인