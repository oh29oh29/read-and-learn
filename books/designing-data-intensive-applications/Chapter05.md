# 복제

복제란 네트워크로 연결된 여러 장비에 동일한 데이터의 복사본을 유지한다는 의미

복제의 장점
- 지리적으로 사용자와 가깝게 데이터를 유지해 지연 시간을 단축
- 시스템의 일부 장애가 발생하더라도 지속적으로 동작할 수 있게 해 가용성을 높힘
- 읽기 질의를 제공하는 장비의 수를 확장해 읽기 처리량 증가

복제에 대한 어려움은 복제된 데이터의 변경 처리에 있음  
노드 간 변경을 복제하기 위한 세 가지 인기 있는 알고리즘은 `단일 리더(single-leader)`, `다중 리더(multi-leader)`, `리더 없는(leaderless)`

### 리더와 팔로워

데이터베이스의 복사본을 저장하는 각 노드를 `복제 서버(replica)`라고 함

데이터베이스의 모든 쓰기는 모든 복제 서버에서 처리돼야 함  
일반적인 해결책은 `리더 기반 복제 leader-based replication`

복제 서버 중 하나를 `리더(leader)`로 지정  
데이터베이스에 쓰기를 할 때 클라이언트는 요청을 리더에게 전송  

리더가 로컬 저장소에 데이터를 기록할 때마다 데이터 변경 내용을 팔로워에게 전송  
팔로워는 리더가 처리한 것과 동일한 순서로 모든 쓰기를 적용

클라이언트가 데이터베이스로부터 읽기를 할 때는 리더 또는 임의 팔로워에게 질의할 수 있지만, 쓰기는 리더에게만 허용  
팔로워는 클라이언트 관점에서 읽기 전용

